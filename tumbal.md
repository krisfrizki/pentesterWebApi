gini aja deh, struktur foldernya :

pentester-api/
  |- src/
      |- controllers/
      |  |- userController.js
      |
      |- models/
      |  |- userModel.js
      |
      |- routes/
      |  |- userRoutes.js
      |
      |- services/
      |  |- authService.js
      |
      |- middlewares/
      |  |- authMiddleware.js
      |
  |- app.js
  |- server.js
  |- config.js
  |- package.json
  |- package-lock.json


//userController.js

const { checkUsernameExist, registerUserModel } = require("../models/userModel");
const hashPassword = require('../services/authService');

// Kontroller untuk registrasi App Owner
const registerUserController = async (req, res) => {
    const {username, email, password} = req.body;

    // Validasi username, email, dan password
    const validUsername = /^[a-z0-9_]+$/;
    const userExists = await checkUsernameExist(username);

    if(!username || !email || !password){
        return res.status(400).json({
            status: 'fail',
            message: 'username, email, dan password wajib diisi!'
        });
    } else if(!validUsername.test(username)){
        return res.status(400).json({
            status: 'fail',
            message: 'username tidak boleh menggunakan spasi / huruf kapital / karakter unik!'
        })
    } else if (userExists){
        return res.status(400).json({
            status: 'fail',
            message: 'username sudah terdaftar'
        })
    } else {
        // Melakukan hash password sebelum menyimpan
        const hashedPassword = await hashPassword(password);
        // Memanggil model untuk melakukan registrasi pengguna
        const registrationResult = await registerUserModel(username, email, hashedPassword);
        
        // Menangani hasil registrasi
        if(registrationResult.status) {
            return res.status(201).json({
                status: 'success',
                message: registrationResult.message
            })
        } else {
            return res.status(400).json({
                status: 'fail',
                message: registrationResult.message
            })
        }
    }
}

module.exports = registerUserController;

//userModel.js

const {Pool} = require('pg');
const config = require('../../config');

// Inisialisasi koneksi ke basis data menggunakan konfigurasi dari config.js
const pool = new Pool(config.pgConfig);

// Fungsi untuk meregistrasi App Owner baru
const registerUserModel = async (username, email, password) => {
    try {
        // Memeriksa apakah email sudah terdaftar
        const existingUser = await pool.query('SELECT * FROM userr WHERE email = $1', [email]);
        if (existingUser.rows.length > 0) {
            return {
                status: false,
                message: 'Email sudah penah digunakan'
            }
        } else {
            // Menyimpan data App Owner baru ke database
            const joined = new Date().toISOString();

            const role = "App Owner"

            await pool.query('INSERT INTO userr (username, email, password, joined, role) VALUES ($1, $2, $3, $4, $5)', [username, email, password, joined, role]);
            return {
                status: true,
                message: 'registrasi sukses'
            }
        }
    } catch (error) {
        console.log('Kesalahan pada registrasi user', error);
        return {
            status: false,
            message: 'kesalahan server internal'
        }
    }
};


// Fungsi untuk memeriksa apakah username sudah ada
const checkUsernameExist = async username => {
    const result = await pool.query('SELECT * FROM userr WHERE username = $1', [username]);
    return result.rows.length > 0;
};

module.exports = {
    registerUserModel,
    checkUsernameExist
}

//userRotes.js

const express = require('express');
const router = express.Router();
const registerUserController = require('../controllers/userController');

router.post('/registerUser', registerUserController);

module.exports = router;

//authService.js

const bcrypt = require('bcrypt');

const hashPassword = async (password) => {
  const saltRounds = 10;
  const hashedPassword = await bcrypt.hash(password, saltRounds);
  return hashedPassword;
};

module.exports = hashPassword;

//app.js

const express = require('express');
const bodyParser = require('body-parser');
const routes = require('./src/routes/userRoutes');

const app = express();

app.use(bodyParser.json());
app.use('/main',routes);

module.exports = app;

//config.js

const config = {
    pgConfig: {
        user: 'postgres',
        host: 'localhost',
        database: 'userRegistrationDB',
        password: 'postgres',
        port: 5432
    }
};

module.exports = config;

//server.js

const express = require('express');
const app = require('./app');

const port = 9000;

app.listen(port, () => {
    console.log(`Server berjalan pada http://localhost:${port}`);
})


tolong buatkan dokumentasi, komen, penjelasan, dan flowchart pada kode diatas secara lengkap
ingat yah, gaboleh ada yang terlewat sedikitpun !!!